<?php/*@Author; Christine A. Black@Version:0.2@todo: Sort out writing to file when running this script from the browser.Version 0.2 -  put in live server details.Version 0.1 - Added the visitor email script.*//*Location of the log file.*/$filename = 'visitorsEmailLog.txt';/*Location of the files.*/if ($_SERVER["TERM"] == 'xterm'){		if (preg_match( '%/var/www/websites/redesign2013%', $_SERVER["PWD"])){			$visitorClassLoxation = '/var/www/websites/redesign2013/includes/class/visitor.class.php';		$visitorsEmailLogLoxation = '/var/www/websites/redesign2013/logs/'.$filename;			}else{				$visitorClassLoxation = '/home/ycyrf718/redesign2013/includes/class/visitor.class.php';		$visitorsEmailLogLoxation = '/home/ycyrf718/redesign2013/logs/'.$filename;			}	}else{	if ($_SERVER["DOCUMENT_ROOT"] == '/var/www/websites/redesign2013'){				$visitorClassLoxation = '/var/www/websites/redesign2013/includes/class/visitor.class.php';		$visitorsEmailLogLoxation = '/var/www/websites/redesign2013/logs/'.$filename;			}else{				$visitorClassLoxation = '/home/ycyrf718/redesign2013/includes/class/visitor.class.php';		$visitorsEmailLogLoxation = '/home/ycyrf718/redesign2013/logs/'.$filename;			}}/*the included files.*/include $visitorClassLoxation;/*Set a new visitor class.*/$visitor = new visitor;/*Saves the output to a variable.*/$output = "\n".'Starting script...'."\n";$output .= 'Script started at: '.date('H:i:s d/m/y', time()).'.'."\n";$output .= $visitor ->email()."\n";$output .= 'Script finished at: '.date('H:i:s d/m/y', time()).'.'."\n";/*Outputs the output variable.*/echo $output."\n";/*Writes the output to a log.*/try {	$file = fopen($visitorsEmailLogLoxation,'a+');		if ($file){		fwrite($file, $output);	}else{				throw new Exception("Couldn't open file.");			}	}catch(Exception $error){		echo 'Error: '.$error ->getMessage(),"\n";	print_r($error->getTrace());	echo 'Exception Code:'.$error->getCode()."\n";	echo 'Line :'.$error->getLine().' - File:'.$error->getFile()."\n";	}?>